# ğŸ”§ Node.js ç‰ˆæœ¬é—®é¢˜ä¿®å¤æŒ‡å—

## é—®é¢˜æè¿°

```
You are using Node.js 20.11.1. Vite requires Node.js version 20.19+ or 22.12+.
error: TypeError: crypto.hash is not a function
```

**åŸå› **ï¼šVite 5.4+ ä½¿ç”¨äº† Node.js 20.19+ æ‰æä¾›çš„ `crypto.hash` APIã€‚

---

## âœ… æ¨èæ–¹æ¡ˆï¼šå‡çº§ Node.js

### Windows ç”¨æˆ·

#### æ–¹æ³• 1: ç›´æ¥ä¸‹è½½å®‰è£…ï¼ˆæœ€ç®€å•ï¼‰

1. è®¿é—® Node.js å®˜ç½‘ï¼šhttps://nodejs.org/
2. ä¸‹è½½ **LTS ç‰ˆæœ¬**ï¼ˆæ¨è v22.xï¼‰
3. è¿è¡Œå®‰è£…ç¨‹åº
4. é‡å¯æ‰€æœ‰ç»ˆç«¯çª—å£
5. éªŒè¯å®‰è£…ï¼š

```bash
node --version  # åº”æ˜¾ç¤º v22.x.x æˆ– v20.19+
npm --version
```

#### æ–¹æ³• 2: ä½¿ç”¨ nvm-windowsï¼ˆæ¨èï¼Œä¾¿äºç®¡ç†å¤šç‰ˆæœ¬ï¼‰

1. **ä¸‹è½½ nvm-windows**
   - è®¿é—®ï¼šhttps://github.com/coreybutler/nvm-windows/releases
   - ä¸‹è½½æœ€æ–°çš„ `nvm-setup.exe`

2. **å®‰è£… nvm**
   - è¿è¡Œå®‰è£…ç¨‹åº
   - é€‰æ‹©å®‰è£…è·¯å¾„ï¼ˆé»˜è®¤å³å¯ï¼‰
   - å®‰è£…å®Œæˆåé‡å¯ç»ˆç«¯

3. **ä½¿ç”¨ nvm å®‰è£… Node.js**

```bash
# æŸ¥çœ‹å¯ç”¨ç‰ˆæœ¬
nvm list available

# å®‰è£… Node.js 22.xï¼ˆæ¨èï¼‰
nvm install 22

# åˆ‡æ¢åˆ° Node.js 22
nvm use 22

# éªŒè¯ç‰ˆæœ¬
node --version
```

4. **è®¾ç½®é»˜è®¤ç‰ˆæœ¬**

```bash
# è®¾ç½® 22 ä¸ºé»˜è®¤ç‰ˆæœ¬
nvm alias default 22
```

---

## ğŸ”„ ä¸´æ—¶æ–¹æ¡ˆï¼šé™çº§ Vite

å¦‚æœæš‚æ—¶æ— æ³•å‡çº§ Node.jsï¼Œå¯ä»¥é™çº§ Vite åˆ°æ”¯æŒ Node.js 20.11 çš„ç‰ˆæœ¬ã€‚

### æ­¥éª¤

1. **ä¿®æ”¹ package.json**

å°† `vite` ç‰ˆæœ¬ä» `^5.4.3` æ”¹ä¸º `^5.3.0`ï¼š

```json
{
  "devDependencies": {
    "vite": "^5.3.0"
  }
}
```

2. **é‡æ–°å®‰è£…ä¾èµ–**

```bash
# åˆ é™¤ node_modules å’Œ lock æ–‡ä»¶
rmdir /s /q node_modules
del package-lock.json

# é‡æ–°å®‰è£…
npm install
```

3. **å¯åŠ¨å¼€å‘æœåŠ¡å™¨**

```bash
npm run dev
```

---

## ğŸ“‹ ç‰ˆæœ¬å¯¹ç…§è¡¨

| Node.js ç‰ˆæœ¬ | Vite ç‰ˆæœ¬ | çŠ¶æ€ |
|-------------|----------|------|
| 20.19+ | 5.4+ | âœ… æ¨è |
| 22.12+ | 5.4+ | âœ… æ¨è |
| 20.11.1 | 5.3.x | âš ï¸ å¯ç”¨ä½†ä¸æ¨è |
| < 20.11 | 5.2.x | âŒ ä¸æ¨è |

---

## ğŸ§ª éªŒè¯å®‰è£…

å®‰è£…å®Œæˆåï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤éªŒè¯ï¼š

```bash
# æ£€æŸ¥ Node.js ç‰ˆæœ¬
node --version
# è¾“å‡ºåº”è¯¥æ˜¯ï¼šv22.x.x æˆ– v20.19+

# æ£€æŸ¥ npm ç‰ˆæœ¬
npm --version

# æ£€æŸ¥ Vite æ˜¯å¦æ­£å¸¸
npm run dev
```

---

## ğŸš¨ å¸¸è§é—®é¢˜

### Q1: nvm use 22 åä»ç„¶æ˜¾ç¤ºæ—§ç‰ˆæœ¬ï¼Ÿ

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. å…³é—­æ‰€æœ‰ç»ˆç«¯çª—å£
2. é‡æ–°æ‰“å¼€ç»ˆç«¯
3. è¿è¡Œ `nvm use 22`
4. éªŒè¯ `node --version`

### Q2: å®‰è£… Node.js åä»ç„¶æŠ¥é”™ï¼Ÿ

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. å®Œå…¨å¸è½½æ—§ç‰ˆæœ¬ Node.js
2. é‡å¯ç”µè„‘
3. é‡æ–°å®‰è£…æ–°ç‰ˆæœ¬
4. åˆ é™¤é¡¹ç›®çš„ `node_modules` æ–‡ä»¶å¤¹
5. è¿è¡Œ `npm install`

### Q3: npm å‘½ä»¤æ— æ³•ä½¿ç”¨ï¼Ÿ

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ£€æŸ¥ç¯å¢ƒå˜é‡ PATH æ˜¯å¦åŒ…å« Node.js è·¯å¾„
2. é‡æ–°å®‰è£… Node.js å¹¶å‹¾é€‰ "Add to PATH"
3. é‡å¯ç»ˆç«¯

### Q4: ä½¿ç”¨ nvm åˆ‡æ¢ç‰ˆæœ¬åé¡¹ç›®æŠ¥é”™ï¼Ÿ

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# æ¸…é™¤ npm ç¼“å­˜
npm cache clean --force

# åˆ é™¤å¹¶é‡æ–°å®‰è£…ä¾èµ–
rmdir /s /q node_modules
del package-lock.json
npm install
```

---

## ğŸ” è¯Šæ–­å‘½ä»¤

è¿è¡Œä»¥ä¸‹å‘½ä»¤æ£€æŸ¥å½“å‰ç¯å¢ƒï¼š

```bash
# æ£€æŸ¥ Node.js ç‰ˆæœ¬
node --version

# æ£€æŸ¥ npm ç‰ˆæœ¬
npm --version

# æ£€æŸ¥ Vite ç‰ˆæœ¬
npm list vite

# æ£€æŸ¥æ‰€æœ‰å·²å®‰è£…çš„ Node.js ç‰ˆæœ¬ï¼ˆå¦‚æœä½¿ç”¨ nvmï¼‰
nvm list

# æ£€æŸ¥å½“å‰ä½¿ç”¨çš„ Node.js ä½ç½®
where node
```

---

## ğŸ“Œ æ¨èé…ç½®

**ç”Ÿäº§ç¯å¢ƒ**ï¼š
- Node.js: 22.x LTS
- npm: 10.x
- Vite: 5.4+

**å¼€å‘ç¯å¢ƒ**ï¼š
- Node.js: 22.x LTS
- npm: 10.x
- Vite: 5.4+

---

## ğŸ’¡ æœ€ä½³å®è·µ

1. **ä½¿ç”¨ LTS ç‰ˆæœ¬**
   - å§‹ç»ˆä½¿ç”¨ Node.js LTSï¼ˆé•¿æœŸæ”¯æŒï¼‰ç‰ˆæœ¬
   - ç›®å‰æ¨èï¼šNode.js 22.x

2. **ä½¿ç”¨ç‰ˆæœ¬ç®¡ç†å·¥å…·**
   - Windows: nvm-windows
   - ä¾¿äºåœ¨ä¸åŒé¡¹ç›®é—´åˆ‡æ¢ Node.js ç‰ˆæœ¬

3. **å®šæœŸæ›´æ–°**
   - å®šæœŸæ£€æŸ¥å¹¶æ›´æ–° Node.js
   - ä¿æŒä¾èµ–é¡¹æœ€æ–°

4. **é¡¹ç›®é…ç½®**
   - åœ¨ `package.json` ä¸­æŒ‡å®š Node.js ç‰ˆæœ¬ï¼š
   ```json
   {
     "engines": {
       "node": ">=20.19.0 || >=22.12.0",
       "npm": ">=10.0.0"
     }
   }
   ```

---

## ğŸ“ è·å–å¸®åŠ©

å¦‚æœä»¥ä¸Šæ–¹æ³•éƒ½æ— æ³•è§£å†³é—®é¢˜ï¼Œè¯·æä¾›ä»¥ä¸‹ä¿¡æ¯ï¼š

1. è¿è¡Œ `node --version` çš„è¾“å‡º
2. è¿è¡Œ `npm --version` çš„è¾“å‡º
3. è¿è¡Œ `npm list vite` çš„è¾“å‡º
4. å®Œæ•´çš„é”™è¯¯ä¿¡æ¯

è”ç³»é‚®ç®±ï¼šchengjinweigoole@gmail.com
