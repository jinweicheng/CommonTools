# 水印功能测试指南

## 🎉 功能已完成！

多格式水印工具已经完美实现，现在可以开始测试了。

## 🌐 访问地址

开发服务器已启动：**http://localhost:3001/tools/**

导航到：**加水印** 模块

## ✅ 测试检查清单

### 1. PDF 文档水印测试

**测试文件准备**：
- [ ] 单页 PDF
- [ ] 多页 PDF（5-10页）
- [ ] 包含图片的 PDF
- [ ] 纯文本 PDF

**测试步骤**：
1. 输入水印文本：`机密文档` 或 `CONFIDENTIAL`
2. 调整透明度到 30%
3. 调整字体大小到 48px
4. 调整角度到 -45°
5. 上传 PDF 文件
6. 等待处理完成
7. 检查下载的文件是否正确添加了水印

**预期结果**：
- ✅ 水印平铺在每一页上
- ✅ 中文水印清晰可见
- ✅ 不影响原文档可读性
- ✅ 文件名自动添加 "-watermarked" 后缀

---

### 2. 图片水印测试

**测试文件准备**：
- [ ] JPG 图片（风景照、人像等）
- [ ] PNG 图片（透明背景）
- [ ] BMP 图片
- [ ] WEBP 图片

**测试步骤**：
1. 输入水印文本：`版权所有` 或 `Copyright`
2. 调整透明度到 40%
3. 调整字体大小到 36px
4. 调整角度到 -30°
5. 上传图片文件
6. 查看预览效果（如果显示）
7. 等待处理完成
8. 检查下载的图片

**预期结果**：
- ✅ 水印清晰可见但不遮挡主体
- ✅ 平铺覆盖整个图片
- ✅ 透明度合适
- ✅ 输出格式与原图一致

---

### 3. Word 文档水印测试

**测试文件准备**：
- [ ] 简单 DOCX（几段文字）
- [ ] 复杂 DOCX（多页、有格式）
- [ ] 包含表格的 DOCX

**测试步骤**：
1. 输入水印文本：`草稿` 或 `DRAFT`
2. 调整字体大小到 32px
3. 上传 Word 文件
4. 等待处理完成
5. 下载并打开生成的 DOCX 文件
6. 检查水印是否正确插入

**预期结果**：
- ✅ 文档开头有水印标识
- ✅ 每隔 5 段有水印插入
- ✅ 文档末尾有水印标识
- ✅ 原文本内容完整保留
- ✅ 生成的文件可以正常打开

---

### 4. UI/UX 测试

**测试项目**：

#### 文件类型检测
- [ ] 上传 PDF 后显示 "当前文件类型: PDF"
- [ ] 上传图片后显示 "当前文件类型: IMAGE"
- [ ] 上传 Word 后显示 "当前文件类型: WORD"
- [ ] 上传不支持的文件显示错误提示

#### 参数调整
- [ ] 水印文本实时更新预览
- [ ] 透明度滑块调整正常
- [ ] 字体大小滑块调整正常
- [ ] 角度滑块调整正常
- [ ] 预览区域实时反映参数变化

#### 错误处理
- [ ] 不上传文件时无操作
- [ ] 上传损坏的文件显示错误信息
- [ ] 上传不支持的格式显示清晰的错误提示
- [ ] 处理失败时显示详细错误信息

#### 响应式设计
- [ ] 桌面端布局正常
- [ ] 平板端布局自适应
- [ ] 移动端布局友好（如果测试）

---

### 5. 性能测试

**测试场景**：

| 文件类型 | 文件大小 | 预期处理时间 | 实际时间 | 结果 |
|---------|----------|--------------|----------|------|
| PDF (5页) | < 1MB | < 3秒 | ___秒 | ⬜ |
| PDF (20页) | 2-5MB | < 10秒 | ___秒 | ⬜ |
| 图片 JPG | 2MB | < 2秒 | ___秒 | ⬜ |
| 图片 PNG | 5MB | < 3秒 | ___秒 | ⬜ |
| Word 文档 | 1MB | < 5秒 | ___秒 | ⬜ |

---

### 6. 边界条件测试

**特殊情况**：
- [ ] 空白 PDF（无内容）
- [ ] 单色图片（纯白/纯黑）
- [ ] 空 Word 文档
- [ ] 超大文件（> 10MB）
- [ ] 文件名包含特殊字符
- [ ] 包含中文的文件名

**极限参数**：
- [ ] 透明度 10%（最小）
- [ ] 透明度 100%（最大）
- [ ] 字体 24px（最小）
- [ ] 字体 120px（最大）
- [ ] 角度 -90°（最小）
- [ ] 角度 90°（最大）
- [ ] 超长水印文本（100+ 字符）
- [ ] 特殊字符水印（emoji、符号）

---

## 🎨 视觉效果检查

### PDF 水印效果
```
预期效果：
┌─────────────────────────────┐
│   文档标题                   │
│                             │
│   正文内容    水印   正文    │
│   正文内容  水印 水印 正文   │
│   正文内容    水印   正文    │
│                             │
└─────────────────────────────┘
```

### 图片水印效果
```
预期效果：
┌─────────────────────────────┐
│ 水印  水印  水印  水印  水印 │
│   水印  图片内容  水印  水印 │
│ 水印  水印  内容  水印  水印 │
│   水印  水印  水印  水印     │
└─────────────────────────────┘
```

### Word 水印效果
```
预期效果：
━━━━ 水印文本 ━━━━

段落 1 内容...
段落 2 内容...
段落 3 内容...
段落 4 内容...
段落 5 内容...

【水印文本】

段落 6 内容...
...

━━━━ 水印文本 ━━━━
```

---

## 🐛 已知问题和解决方案

### 问题 1: 中文水印在某些 PDF 阅读器中显示模糊
**解决方案**: 已通过转换为图片解决，确保在所有阅读器中清晰显示。

### 问题 2: Word 文档原有格式丢失
**解决方案**: 目前只提取纯文本，复杂格式需要手动调整。未来可以考虑保留更多格式信息。

### 问题 3: 大文件处理较慢
**解决方案**: 这是正常现象，所有处理都在本地完成以确保安全性。建议分批处理大文件。

---

## 📊 测试报告模板

```markdown
## 测试报告

**测试人员**: ___________
**测试日期**: ___________
**测试环境**: 
- 浏览器: ___________
- 操作系统: ___________
- 屏幕分辨率: ___________

### PDF 测试结果
- [ ] 通过 / [ ] 失败
- 问题描述: ___________

### 图片测试结果
- [ ] 通过 / [ ] 失败
- 问题描述: ___________

### Word 测试结果
- [ ] 通过 / [ ] 失败
- 问题描述: ___________

### UI/UX 测试结果
- [ ] 通过 / [ ] 失败
- 问题描述: ___________

### 性能测试结果
- 平均处理时间: ___ 秒
- 是否满意: [ ] 是 / [ ] 否

### 总体评价
- 满意度: ⭐⭐⭐⭐⭐ (1-5星)
- 改进建议: ___________
```

---

## 🚀 快速测试脚本

如果想快速测试所有功能，按以下顺序进行：

1. **快速 PDF 测试** (2分钟)
   - 上传任意 PDF
   - 使用默认参数
   - 检查输出文件

2. **快速图片测试** (1分钟)
   - 上传一张照片
   - 使用默认参数
   - 检查输出文件

3. **快速 Word 测试** (2分钟)
   - 上传简单的 Word 文档
   - 使用默认参数
   - 打开输出文件检查

**总耗时**: 约 5 分钟

---

## 📞 问题反馈

如果发现任何问题，请记录：

1. **问题描述**: 详细说明发生了什么
2. **复现步骤**: 如何重现这个问题
3. **预期结果**: 应该是什么样子
4. **实际结果**: 实际是什么样子
5. **文件信息**: 测试文件的类型、大小等
6. **截图**: 如果可能，提供截图

---

**祝测试顺利！** 🎉

如有任何问题，请随时反馈。

